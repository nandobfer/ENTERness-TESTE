// *** GENERATED BY PRISMIX :: DO NOT EDIT ***
datasource db {
	provider = "mysql"
	url = env("DATABASE_URL")
}
generator client {
	provider = "prisma-client-js"
}

model User {
    id              String          @id @default(uuid())
    username        String          @unique

    ownedChats      Chat[]          @relation(name: "chat_owner")
    chats           Chat[]
    messages        Message[]
}

model Chat {
    id              String          @id @default(uuid())
    name            String
    password        String?

    lastMessageId   String?
    lastMessage     Message?        @relation(name: "lastMessage")

    ownerId         String
    owner           User            @relation(fields: [ownerId], references: [id], onDelete: Cascade, name: "chat_owner")

    users           User[]
    messages        Message[]

}

model Message {
    id              String          @id @default(uuid())
    body            String          @db.LongText()

    chatId          String
    chat            Chat            @relation(fields: [chatId], references: [id], onDelete: Cascade)

    chatLastId      String          @unique
    chatLastMessage Chat            @relation(fields: [chatLastId], references: [id], name: "lastMessage", onDelete: Cascade)

    userId          String
    user            User            @relation(fields: [userId], references: [id], onDelete: Cascade)
    
}